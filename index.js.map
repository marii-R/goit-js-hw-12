{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const renderImages = hits =>\n  hits\n    .map(image => {\n      \n      const limitedTags = image.tags\n        .split(', ')\n        .slice(0, 3) \n        .join(', ');\n\n      return `\n        <li class=\"gallery-card\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n              class=\"gallery-img\"\n              src=\"${image.webformatURL}\"\n              alt=\"${limitedTags}\" \n              loading=\"lazy\"\n            />\n            <div class=\"info\">\n              <div class=\"info-list\">\n                <span class=\"info-item\">Likes</span>\n                <span class=\"info-item-value\">${image.likes}</span>\n              </div>\n              <div class=\"info-list\">\n                <span class=\"info-item\">Views</span>\n                <span class=\"info-item-value\">${image.views}</span>\n              </div>\n              <div class=\"info-list\">\n                <span class=\"info-item\">Comments</span>\n                <span class=\"info-item-value\">${image.comments}</span>\n              </div>\n              <div class=\"info-list\">\n                <span class=\"info-item\">Downloads</span>\n                <span class=\"info-item-value\">${image.downloads}</span>\n              </div>\n            </div>\n          </a>\n        </li>`;\n    })\n    .join('');","const API_KEY = '48549557-eddb482997c8ef9e0172f80ee';\n\nexport const fetchImage = query => {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n  });\n  return fetch(`https://pixabay.com/api/?${params}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { renderImages } from './js/render-functions';\nimport { fetchImage } from './js/pixabay-api';\n\nconst fetchImageForm = document.querySelector('.search-form');\nconst formInput = document.querySelector('.search-input');\nconst formBtn = document.querySelector('.search-btn');\nconst imagesListEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfetchImageForm.addEventListener('submit', event => {\n  event.preventDefault();\n    const query = formInput.value.trim();\n    \n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search term.',\n      position: 'topRight',\n      messageColor: '#ffffff',\n      backgroundColor: '#9090ff',\n    });\n    return;\n    }\n    \n  imagesListEl.innerHTML = '';\n    loader.classList.add('active');\n    \n  fetchImage(query)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            messageColor: '#ffffff',\n            backgroundColor: '#ff4141',\n        });\n          \n        loader.classList.remove('active');\n        return;\n      }\n        \n        imagesListEl.insertAdjacentHTML('beforeend', renderImages(data.hits));\n\n       const images = imagesListEl.querySelectorAll('.gallery-img');\n       const imagesToLoad = [...images].slice(0, 10);\n       Promise.all(imagesToLoad.map(img => new Promise(resolve => (img.onload = resolve))));\n\n      loader.classList.remove('active'); \n      lightbox.refresh();\n    })\n      \n    .catch(error => {\n      loader.classList.remove('active');\n      iziToast.error({\n        message: 'Something went wrong, please try again later.',\n        position: 'topRight',\n        messageColor: '#ffffff',\n        backgroundColor: '#ff4141',\n        \n      });\n      console.error('Error fetching data:', error);\n    });\n});"],"names":["renderImages","hits","image","limitedTags","API_KEY","fetchImage","query","params","response","fetchImageForm","formInput","imagesListEl","loader","lightbox","SimpleLightbox","event","iziToast","data","imagesToLoad","img","resolve","error"],"mappings":"6vBAAO,MAAMA,EAAeC,GAC1BA,EACG,IAAIC,GAAS,CAEZ,MAAMC,EAAcD,EAAM,KACvB,MAAM,IAAI,EACV,MAAM,EAAG,CAAC,EACV,KAAK,IAAI,EAEZ,MAAO;AAAA;AAAA,0CAE6BA,EAAM,aAAa;AAAA;AAAA;AAAA,qBAGxCA,EAAM,YAAY;AAAA,qBAClBC,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAMgBD,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,gDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,cAK/D,CAAK,EACA,KAAK,EAAE,ECvCNE,EAAU,qCAEHC,EAAaC,GAAS,CACjC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACD,OAAO,MAAM,4BAA4BC,CAAM,EAAE,EAAE,KAAKC,GAAY,CAClE,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,ECPMC,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAY,SAAS,cAAc,eAAe,EACxC,SAAS,cAAc,aAAa,EACpD,MAAMC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EACDL,EAAe,iBAAiB,SAAUM,GAAS,CACjDA,EAAM,eAAc,EAClB,MAAMT,EAAQI,EAAU,MAAM,KAAI,EAEpC,GAAI,CAACJ,EAAO,CACVU,EAAS,QAAQ,CACf,QAAS,8BACT,SAAU,WACV,aAAc,UACd,gBAAiB,SACvB,CAAK,EACD,MACC,CAEHL,EAAa,UAAY,GACvBC,EAAO,UAAU,IAAI,QAAQ,EAE/BP,EAAWC,CAAK,EACb,KAAKW,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,QACE,2EACA,SAAU,WACV,aAAc,UACd,gBAAiB,SAC7B,CAAS,EAEDJ,EAAO,UAAU,OAAO,QAAQ,EAChC,MACD,CAECD,EAAa,mBAAmB,YAAaX,EAAaiB,EAAK,IAAI,CAAC,EAGrE,MAAMC,EAAe,CAAC,GADPP,EAAa,iBAAiB,cAAc,CAC5B,EAAE,MAAM,EAAG,EAAE,EAC5C,QAAQ,IAAIO,EAAa,IAAIC,GAAO,IAAI,QAAQC,GAAYD,EAAI,OAASC,CAAQ,CAAC,CAAC,EAEpFR,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAS,QAAO,CACtB,CAAK,EAEA,MAAMQ,GAAS,CACdT,EAAO,UAAU,OAAO,QAAQ,EAChCI,EAAS,MAAM,CACb,QAAS,gDACT,SAAU,WACV,aAAc,UACd,gBAAiB,SAEzB,CAAO,EACD,QAAQ,MAAM,uBAAwBK,CAAK,CACjD,CAAK,CACL,CAAC"}